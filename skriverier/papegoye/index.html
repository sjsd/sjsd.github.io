<!DOCTYPE html>
<html data-html-server-rendered="true" lang="nb" class="h-full" data-vue-tag="class,lang">
  <head>
    <title>Papegøye  | Helge Johnsen</title><meta name="gridsome:hash" content="190e3481eede75abcd92e712c16ac94f9cd52e73"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.3"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" name="yandex-verification" content="ffddc7f095ad060f"><meta data-vue-tag="ssr" name="msvalidate.01" content="8266CD570A96286AF1BA64938A15F43F"><meta data-vue-tag="ssr" name="theme-color" content="#ffffff"><meta data-vue-tag="ssr" name="Sist oppdatert" content="Mon Nov 16 2020 14:21:26 GMT+0100 (GMT+01:00)"><meta data-vue-tag="ssr" data-key="description" name="description" content="Med noen enkle linjer med JavaScript skal vi få nettleseren til å gjenta det vi sier, til og med få vite hvor mye klokka er."><meta data-vue-tag="ssr" data-key="strapiId" name="strapiId" content="44"><meta data-vue-tag="ssr" property="og:type" content="article"><meta data-vue-tag="ssr" property="og:title" content="Papegøye"><meta data-vue-tag="ssr" property="og:description" content="Med noen enkle linjer med JavaScript skal vi få nettleseren til å gjenta det vi sier, til og med få vite hvor mye klokka er."><meta data-vue-tag="ssr" property="og:url" content="https://www.helgejohnsen.no/skriverier/papegoye/"><meta data-vue-tag="ssr" property="article:published_time" content="2020-11-16"><meta data-vue-tag="ssr" property="og:image" content="https://res.cloudinary.com/sjsd/image/upload/c_scale,q_60,w_896/njs5lvm67aolth8pvulf"><meta data-vue-tag="ssr" property="og:locale" content="nb_NO"><meta data-vue-tag="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-tag="ssr" name="twitter:title" content="Papegøye"><meta data-vue-tag="ssr" name="twitter:description" content="Med noen enkle linjer med JavaScript skal vi få nettleseren til å gjenta det vi sier, til og med få vite hvor mye klokka er."><meta data-vue-tag="ssr" name="twitter:site" content="@sjsd"><meta data-vue-tag="ssr" name="twitter:creator" content="@sjsd"><meta data-vue-tag="ssr" name="twitter:image" content="https://res.cloudinary.com/sjsd/image/upload/c_scale,q_60,w_896/njs5lvm67aolth8pvulf"><link data-vue-tag="ssr" rel="preconnect" href="//fonts.googleapis.com"><link data-vue-tag="ssr" rel="dns-prefetch" href="//www.google-analytics.com"><link data-vue-tag="ssr" rel="dns-prefetch" href="//res.cloudinary.com"><link data-vue-tag="ssr" rel="preconnect" href="https://fonts.gstatic.com" crossorgin=""><link data-vue-tag="ssr" rel="preconnect" href="https://ajax.googleapis.com"><link data-vue-tag="ssr" rel="me" href="https://github.com/sjsd"><link data-vue-tag="ssr" rel="author" href="/humans.txt"><link data-vue-tag="ssr" rel="canonical" href="https://www.helgejohnsen.no/skriverier/papegoye/"><script data-vue-tag="ssr" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.helgejohnsen.no"},"sameAs":["https://www.linkedin.com/in/helgejohnsen/","https://twitter.com/sjsd","https://www.instagram.com/sjsd/"],"author":{"@type":"Person","name":"Helge Johnsen"},"editor":"Helge Johnsen","publisher":{"@type":"Organization","name":"Helge Johnsen","logo":{"@type":"ImageObject","url":"https://helgejohnsen.no/android-chrome-512x512.png"}},"headline":"Papegøye","description":"Med noen enkle linjer med JavaScript skal vi få nettleseren til å gjenta det vi sier, til og med få vite hvor mye klokka er.","datePublished":"2020-11-16T12:51:02+01:00","dateCreated":"2020-11-16T12:51:02+01:00","dateModified":"2020-11-16T14:19:11+01:00","image":"https://res.cloudinary.com/sjsd/image/upload/c_scale,q_60,w_896/njs5lvm67aolth8pvulf","url":"https://www.helgejohnsen.no/skriverier/papegoye/","alternativeHeadline":"Får nettleseren til å svare deg med litt javascript"}</script><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript><link rel="preload" href="/assets/css/12.styles.7f9eba89.css" as="style"><link rel="preload" href="/assets/js/app.d4f856d0.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--blog-posts-vue.c22ddf38.js" as="script"><link rel="prefetch" href="/assets/js/1.864c4d1f.js"><link rel="prefetch" href="/assets/js/page--src--pages--404-vue.3edd8c4f.js"><link rel="prefetch" href="/assets/js/page--src--pages--arbeid-vue.3d311821.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.469ab2ff.js"><link rel="prefetch" href="/assets/js/page--src--pages--kontakt-vue.3ea1af60.js"><link rel="prefetch" href="/assets/js/page--src--pages--om-vue.20574a15.js"><link rel="prefetch" href="/assets/js/page--src--pages--skriverier-vue.7fc0777d.js"><link rel="prefetch" href="/assets/js/page--src--pages--youtube-vue.ffa5d814.js"><link rel="prefetch" href="/assets/js/page--src--templates--portfolios-vue.70bdec81.js"><link rel="prefetch" href="/assets/js/vendors~page--src--pages--arbeid-vue~page--src--pages--index-vue~page--src--pages--skriverier-vue~pa~ebe6a1e9.18f0d60c.js"><link rel="stylesheet" href="/assets/css/12.styles.7f9eba89.css">
  </head>
  <body class="antialiased font-serif" data-vue-tag="class">
    <div data-server-rendered="true" id="app"><main><header><div class="pt-20 py-8 sm:py-24"><div class="max-w-xl md:max-w-3xl xl:max-w-4xl mx-auto text-center px-6"><h1 class="text-3xl sm:text-5xl leading-tight font-sans font-bold mb-2 text-black">
          Papegøye
          <span class="sm:text-4xl text-2xl font-normal block">Får nettleseren til å svare deg med litt javascript</span></h1><p class="text-gray-700"><time class="capitalize">16. november, 2020</time></p></div></div><div class="max-w-xl md:max-w-3xl xl:max-w-4xl mx-auto text-center mb-8 sm:mb-24"><img src="https://res.cloudinary.com/sjsd/image/upload/c_scale,q_60,w_896/njs5lvm67aolth8pvulf" alt="Papegøye" class="inline-block"></div><nav class="absolute top-0 left-0 z-20 mt-6 ml-6"><a href="/skriverier/" class="text-sm border opacity-75 hover:opacity-100 rounded-full px-4 py-2 transition-opacity active">← Les flere skriverier</a></nav></header><article class="max-w-xl md:max-w-2xl xl:max-w-3xl mx-auto px-6 sm:px-12 pb-8 sm:pb-24"><!----><p class="text-gray-700 font-bold text-xl mb-10">
        Med noen enkle linjer med JavaScript skal vi få nettleseren til å gjenta det vi sier, til og med få vite hvor mye klokka er.
      </p><div class="markdown text-lg leading-normal text-gray-700"><p>Hvis du er som meg så er du kanskje litt nysgjerrig på hva som er mulig å få til uten at man nødvendigvis har brukt for det.  Det bærer arbeidsbenken på hobbyrommet mitt preg av. Utallige proof of concepts har blitt teste ut og aldri blitt noe mer av.</p>
<p>For noen dager siden snublet jeg tilfeldigvis over <a href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechRecognition">SpeechRecognition</a> i JavaScript. Så nå har jeg forlatt hobbyrommet og benket meg ned foran datamaskinen for å lage en aldri så liten papegøye som hermer etter det som blir sagt.</p>
<p>Nå skal jeg være helt ærlig å si at jeg aldri har hatt behov for å lage en nettside som man kan snakke til. Men hvem vet, kanskje jeg kan få det i fremtiden. Men det er jo også utrolig gøy å kunne lage ulike svar man kan få tilbake når man stiller et spørsmål. Kanskje jeg sitter nå å lager Sara, den ukjente søsteren til Siri? Tvilsomt.</p>
<p>Siden vi skal skrive relativt enkelt JavaScript så passer dette innlegget godt for nybegynnere i JavaScript. Så jeg skal prøve å ta dette stegvis og forkortet. Hele koden kan lastes ned fra GitHub <a href="https://github.com/sjsd/parrot">https://github.com/sjsd/parrot</a></p>
<p>Den ferdige koden vil ta opp lyd etter at man har trykket på knappen. Når man slutter å snakke så vil den automatisk detektere dette og vise det man har sagt som tekst på skjermen.</p>
<h2>Steg 1 - index.html</h2>
<p>Først trenger vi en HTML-fil som skal inneholde en knapp og et element som skal vise tekst. Jeg dykker ikke mer i dybden enn som så.</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;no&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;title&gt;Papegøye&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;button class=&quot;talk&quot;&gt;Snakk til meg&lt;/button&gt;
	&lt;div class=&quot;content&quot;&gt;&lt;/div&gt;
	&lt;script src=&quot;app.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Legg merke til at vi har en <em>script-tag</em> som henter inn en JavaScript-fil som heter <em>app.js</em>.</p>
<h2>Steg 2 - app.js</h2>
<p>Ikke overraskende så trenger vi også en JavaScript-fil som heter <em>app.js</em>. Denne kan enn så lenge være tom. Resten av koden vil foregå i denne filen.</p>
<h2>Steg 3 - tildele noen elementer</h2>
<p>Vi tildeler de to DOM-elementene til hver sin variabel. Dette gjør det enklere for oss senere å gjøre noe med dem.</p>
<pre><code>const btn = document.querySelector('.talk');
const content = document.querySelector('.content');
</code></pre>
<p>Vi trenger også å tilegne oss to variabler for SpeechRecognition.</p>
<pre><code>const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
const recognition = new SpeechRecognition();
</code></pre>
<p>Det er kanskje nå jeg burde nevne at <a href="https://caniuse.com/?search=SpeechRecognition">ikke alle nettlesere støtter SpeechRecognition</a>. I skrivende stund er det Chrome som har best støtte.</p>
<h3>Steg 4 - undøvendig</h3>
<p>Dette steget er egentlig undøvendig pr. nå, men det er kjekt å se når SpeechRecognition er aktivt. Derfor har vi det med. Så vi lager to nye funksjoner.</p>
<p>Denne skriver ut en melding i konsollet når SpeechRecognition er aktivert. Tar du forøvrig referansen?</p>
<pre><code>recognition.onstart = () =&gt; {
    console.log('Voice is activated, As I rock, rock, rock, rock, rock the microphone');
};
</code></pre>
<p>Denne skriver ut en melding i konsollet når SpeechRecognition er ferdig.</p>
<pre><code>recognition.onspeechend = () =&gt; {
    console.log('Carry on with the freestyler');
};
</code></pre>
<p>Inne i disse to funksjonene kan man også legge til kode for å gjøre visuelle endringer i nettleseren. F.eks. en indikasjon på at nå kan man snakker. Så de er ikke helt undøvendige, men i dette eksempelet bruker jeg de ikke til noe spesielt.</p>
<h3>Steg 5 - trykk på knapp</h3>
<p>Når man trykker på knappen så ønsker man å starte opptaket av stemmen. Denne avsluttes automatisk etter en kort stund med stillhet.</p>
<pre><code>btn.addEventListener('click', () =&gt; {
    recognition.start();
});
</code></pre>
<h3>Steg 6 - vis resultatet</h3>
<p>Når opptaket er ferdig så får man tilgjengelig en event og et av feltene er i ren tekst. Denne teksten skal vi vise på skjermen.</p>
<pre><code>recognition.onresult = (event) =&gt; {
    const current = event.resultIndex;
    const transcript = event.results[current][0].transcript;
    content.textContent = transcript;
}
</code></pre>
<p>Nå er vi i grunn ferdig. Men vi har jo lyst til å leke litt med enda et API i nettleseren som gjør at den snakker til oss også. Så vi lager enda en funksjon.</p>
<h3>Steg 7 - papegøyen</h3>
<p>Her bruker vi <a href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesisUtterance">SpeechSynthesisUtterance</a> Denne kan svare oss på ulike språk (ikke oversette). Legg merke til at vi i HTML-fila på <em>HTML-tagen</em> har en attributt <code>lang=&quot;no&quot;</code>. <em>no</em> for norsk. Det gjør at vi kan gi SpeechSynthesisUtterance norsk tekst og skal svare med norsk stemme.</p>
<pre><code>parrot = (message) =&gt; {
    const speech = new SpeechSynthesisUtterance();
    speech.volume = 1;
    speech.rate = 0.9;
    speech.pitch = 1;
    speech.text = message;
   	window.speechSynthesis.speak(speech);
}
</code></pre>
<p>Vi må tilbake til steg 6 og legge til <code>parrot(transcript);</code> slik:</p>
<pre><code>recognition.onresult = (event) =&gt; {
    const current = event.resultIndex;
    const transcript = event.results[current][0].transcript;
    content.textContent = transcript;
	parrot(transcript);
}
</code></pre>
<hr>
<p>Nå er det bare å skru opp lyden og snakke i vei!</p>
<h3>Steg 8 - vent nå litt ...</h3>
<p>Vent nå litt, nevnte vi ikke at den skulle svare med klokkeslett? Joda, vi gjør følgende endringer i funksjonen for papegøyen vår.</p>
<p>Vi legger til en if for å sjekke om teksten som papegøyen ( <code>parrot()</code> ) får inneholder ordet <em>klokka</em>.</p>
<pre><code>    if (message.includes('klokka')) {
        var time = new Date();
        var h = time.getHours();
        var m = time.getMinutes();
        speech.text = 'Klokka er ' + h + ':' + m;
        content.textContent = speech.text;
    }
</code></pre>
<p>Da blir hele <code>parrot()</code> -funksjonen slik:</p>
<pre><code>parrot = (message) =&gt; {
    const speech = new SpeechSynthesisUtterance();
    speech.volume = 1;
    speech.rate = 0.9;
    speech.pitch = 1;
    speech.text = message;

    if (message.includes('klokka')) {
        var time = new Date();
        var h = time.getHours();
        var m = time.getMinutes();
        speech.text = 'Klokka er ' + h + ':' + m;
        content.textContent = speech.text;
    }

    window.speechSynthesis.speak(speech);
 }

</code></pre>
<hr>
<p>Hele mitt eksemple og hele min kode har jeg lagt ut på GitHub <a href="https://github.com/sjsd/parrot">https://github.com/sjsd/parrot</a></p>
<hr>
<p>Icons made by <a href="https://www.flaticon.com/authors/freepik">Freepik</a> from <a href="www.flaticon.com">www.flaticon.com</a>.</p>
</div><!----></article><footer class="text-gray-700 text-sm leading-normal flex flex-wrap justify-between mx-auto max-w-3xl px-6 sm:px-12 pb-8 sm:pb-10"><div class="w-full sm:w-1/2 mb-4 sm:mb-0"><a href="/" title="Helge Johnsen" class="font-sans font-bold text-3xl">
        Helge Johnsen
      </a></div><div class="w-full sm:w-1/2"><nav><ul class="flex sm:justify-end -mx-2 mt-3"><li class="px-2"><a href="/" class="border-b border-transparent hover:border-gray-400 transition-border-color active">Hjem</a></li><li class="px-2"><a href="/skriverier/" class="border-b border-transparent hover:border-gray-400 transition-border-color active">Skriverier</a></li><li class="px-2"><a href="/om/" class="border-b border-transparent hover:border-gray-400 transition-border-color">Om</a></li><li class="px-2"><a href="/kontakt/" class="border-b border-transparent hover:border-gray-400 transition-border-color">Kontakt</a></li></ul></nav></div><div class="w-full text-center mt-10 mb-4 sm:mb-0"><p>Design basert på <a href="https://github.com/cossssmin/gridsome-starter-bleda" class="border-b border-transparent hover:border-gray-400 transition-border-color">Bleda</a> av <a href="https://twitter.com/cossssmin" class="border-b border-transparent hover:border-gray-400 transition-border-color">@cossssmin</a></p><p>Bygget med <a href="https://gridsome.org" class="border-b border-transparent hover:border-gray-400 transition-border-color">Gridsome</a> &amp; <a href="https://tailwindcss.com/" class="border-b border-transparent hover:border-gray-400 transition-border-color">Tailwind CSS</a>.</p><p><a href="http://one.me/noarghat" title="Få 110,- i avslag på hostingpakke hos One.com" target="_blank" rel="nofollow noopener noreferrer">Få 110,- avslag på hostingpakke hos One.com</a></p></div></footer></main></div>
    <script>window.__INITIAL_STATE__={"data":{"blogPosts":{"id":"44","title":"Papegøye","subtitle":"Får nettleseren til å svare deg med litt javascript","abstract":"Med noen enkle linjer med JavaScript skal vi få nettleseren til å gjenta det vi sier, til og med få vite hvor mye klokka er.","bodytext":"\u003Cp\u003EHvis du er som meg så er du kanskje litt nysgjerrig på hva som er mulig å få til uten at man nødvendigvis har brukt for det.  Det bærer arbeidsbenken på hobbyrommet mitt preg av. Utallige proof of concepts har blitt teste ut og aldri blitt noe mer av.\u003C\u002Fp\u003E\n\u003Cp\u003EFor noen dager siden snublet jeg tilfeldigvis over \u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FWeb\u002FAPI\u002FSpeechRecognition\"\u003ESpeechRecognition\u003C\u002Fa\u003E i JavaScript. Så nå har jeg forlatt hobbyrommet og benket meg ned foran datamaskinen for å lage en aldri så liten papegøye som hermer etter det som blir sagt.\u003C\u002Fp\u003E\n\u003Cp\u003ENå skal jeg være helt ærlig å si at jeg aldri har hatt behov for å lage en nettside som man kan snakke til. Men hvem vet, kanskje jeg kan få det i fremtiden. Men det er jo også utrolig gøy å kunne lage ulike svar man kan få tilbake når man stiller et spørsmål. Kanskje jeg sitter nå å lager Sara, den ukjente søsteren til Siri? Tvilsomt.\u003C\u002Fp\u003E\n\u003Cp\u003ESiden vi skal skrive relativt enkelt JavaScript så passer dette innlegget godt for nybegynnere i JavaScript. Så jeg skal prøve å ta dette stegvis og forkortet. Hele koden kan lastes ned fra GitHub \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fsjsd\u002Fparrot\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fsjsd\u002Fparrot\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EDen ferdige koden vil ta opp lyd etter at man har trykket på knappen. Når man slutter å snakke så vil den automatisk detektere dette og vise det man har sagt som tekst på skjermen.\u003C\u002Fp\u003E\n\u003Ch2\u003ESteg 1 - index.html\u003C\u002Fh2\u003E\n\u003Cp\u003EFørst trenger vi en HTML-fil som skal inneholde en knapp og et element som skal vise tekst. Jeg dykker ikke mer i dybden enn som så.\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode\u003E&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;no&quot;&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;\n    &lt;title&gt;Papegøye&lt;\u002Ftitle&gt;\n&lt;\u002Fhead&gt;\n&lt;body&gt;\n\t&lt;button class=&quot;talk&quot;&gt;Snakk til meg&lt;\u002Fbutton&gt;\n\t&lt;div class=&quot;content&quot;&gt;&lt;\u002Fdiv&gt;\n\t&lt;script src=&quot;app.js&quot;&gt;&lt;\u002Fscript&gt;\n&lt;\u002Fbody&gt;\n&lt;\u002Fhtml&gt;\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ELegg merke til at vi har en \u003Cem\u003Escript-tag\u003C\u002Fem\u003E som henter inn en JavaScript-fil som heter \u003Cem\u003Eapp.js\u003C\u002Fem\u003E.\u003C\u002Fp\u003E\n\u003Ch2\u003ESteg 2 - app.js\u003C\u002Fh2\u003E\n\u003Cp\u003EIkke overraskende så trenger vi også en JavaScript-fil som heter \u003Cem\u003Eapp.js\u003C\u002Fem\u003E. Denne kan enn så lenge være tom. Resten av koden vil foregå i denne filen.\u003C\u002Fp\u003E\n\u003Ch2\u003ESteg 3 - tildele noen elementer\u003C\u002Fh2\u003E\n\u003Cp\u003EVi tildeler de to DOM-elementene til hver sin variabel. Dette gjør det enklere for oss senere å gjøre noe med dem.\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode\u003Econst btn = document.querySelector('.talk');\nconst content = document.querySelector('.content');\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EVi trenger også å tilegne oss to variabler for SpeechRecognition.\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode\u003Econst SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\nconst recognition = new SpeechRecognition();\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EDet er kanskje nå jeg burde nevne at \u003Ca href=\"https:\u002F\u002Fcaniuse.com\u002F?search=SpeechRecognition\"\u003Eikke alle nettlesere støtter SpeechRecognition\u003C\u002Fa\u003E. I skrivende stund er det Chrome som har best støtte.\u003C\u002Fp\u003E\n\u003Ch3\u003ESteg 4 - undøvendig\u003C\u002Fh3\u003E\n\u003Cp\u003EDette steget er egentlig undøvendig pr. nå, men det er kjekt å se når SpeechRecognition er aktivt. Derfor har vi det med. Så vi lager to nye funksjoner.\u003C\u002Fp\u003E\n\u003Cp\u003EDenne skriver ut en melding i konsollet når SpeechRecognition er aktivert. Tar du forøvrig referansen?\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode\u003Erecognition.onstart = () =&gt; {\n    console.log('Voice is activated, As I rock, rock, rock, rock, rock the microphone');\n};\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EDenne skriver ut en melding i konsollet når SpeechRecognition er ferdig.\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode\u003Erecognition.onspeechend = () =&gt; {\n    console.log('Carry on with the freestyler');\n};\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EInne i disse to funksjonene kan man også legge til kode for å gjøre visuelle endringer i nettleseren. F.eks. en indikasjon på at nå kan man snakker. Så de er ikke helt undøvendige, men i dette eksempelet bruker jeg de ikke til noe spesielt.\u003C\u002Fp\u003E\n\u003Ch3\u003ESteg 5 - trykk på knapp\u003C\u002Fh3\u003E\n\u003Cp\u003ENår man trykker på knappen så ønsker man å starte opptaket av stemmen. Denne avsluttes automatisk etter en kort stund med stillhet.\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode\u003Ebtn.addEventListener('click', () =&gt; {\n    recognition.start();\n});\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3\u003ESteg 6 - vis resultatet\u003C\u002Fh3\u003E\n\u003Cp\u003ENår opptaket er ferdig så får man tilgjengelig en event og et av feltene er i ren tekst. Denne teksten skal vi vise på skjermen.\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode\u003Erecognition.onresult = (event) =&gt; {\n    const current = event.resultIndex;\n    const transcript = event.results[current][0].transcript;\n    content.textContent = transcript;\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ENå er vi i grunn ferdig. Men vi har jo lyst til å leke litt med enda et API i nettleseren som gjør at den snakker til oss også. Så vi lager enda en funksjon.\u003C\u002Fp\u003E\n\u003Ch3\u003ESteg 7 - papegøyen\u003C\u002Fh3\u003E\n\u003Cp\u003EHer bruker vi \u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FWeb\u002FAPI\u002FSpeechSynthesisUtterance\"\u003ESpeechSynthesisUtterance\u003C\u002Fa\u003E Denne kan svare oss på ulike språk (ikke oversette). Legg merke til at vi i HTML-fila på \u003Cem\u003EHTML-tagen\u003C\u002Fem\u003E har en attributt \u003Ccode\u003Elang=&quot;no&quot;\u003C\u002Fcode\u003E. \u003Cem\u003Eno\u003C\u002Fem\u003E for norsk. Det gjør at vi kan gi SpeechSynthesisUtterance norsk tekst og skal svare med norsk stemme.\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode\u003Eparrot = (message) =&gt; {\n    const speech = new SpeechSynthesisUtterance();\n    speech.volume = 1;\n    speech.rate = 0.9;\n    speech.pitch = 1;\n    speech.text = message;\n   \twindow.speechSynthesis.speak(speech);\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EVi må tilbake til steg 6 og legge til \u003Ccode\u003Eparrot(transcript);\u003C\u002Fcode\u003E slik:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode\u003Erecognition.onresult = (event) =&gt; {\n    const current = event.resultIndex;\n    const transcript = event.results[current][0].transcript;\n    content.textContent = transcript;\n\tparrot(transcript);\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Chr\u003E\n\u003Cp\u003ENå er det bare å skru opp lyden og snakke i vei!\u003C\u002Fp\u003E\n\u003Ch3\u003ESteg 8 - vent nå litt ...\u003C\u002Fh3\u003E\n\u003Cp\u003EVent nå litt, nevnte vi ikke at den skulle svare med klokkeslett? Joda, vi gjør følgende endringer i funksjonen for papegøyen vår.\u003C\u002Fp\u003E\n\u003Cp\u003EVi legger til en if for å sjekke om teksten som papegøyen ( \u003Ccode\u003Eparrot()\u003C\u002Fcode\u003E ) får inneholder ordet \u003Cem\u003Eklokka\u003C\u002Fem\u003E.\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode\u003E    if (message.includes('klokka')) {\n        var time = new Date();\n        var h = time.getHours();\n        var m = time.getMinutes();\n        speech.text = 'Klokka er ' + h + ':' + m;\n        content.textContent = speech.text;\n    }\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EDa blir hele \u003Ccode\u003Eparrot()\u003C\u002Fcode\u003E -funksjonen slik:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode\u003Eparrot = (message) =&gt; {\n    const speech = new SpeechSynthesisUtterance();\n    speech.volume = 1;\n    speech.rate = 0.9;\n    speech.pitch = 1;\n    speech.text = message;\n\n    if (message.includes('klokka')) {\n        var time = new Date();\n        var h = time.getHours();\n        var m = time.getMinutes();\n        speech.text = 'Klokka er ' + h + ':' + m;\n        content.textContent = speech.text;\n    }\n\n    window.speechSynthesis.speak(speech);\n }\n\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Chr\u003E\n\u003Cp\u003EHele mitt eksemple og hele min kode har jeg lagt ut på GitHub \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fsjsd\u002Fparrot\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fsjsd\u002Fparrot\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Cp\u003EIcons made by \u003Ca href=\"https:\u002F\u002Fwww.flaticon.com\u002Fauthors\u002Ffreepik\"\u003EFreepik\u003C\u002Fa\u003E from \u003Ca href=\"www.flaticon.com\"\u003Ewww.flaticon.com\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n","image":"https:\u002F\u002Fres.cloudinary.com\u002Fsjsd\u002Fimage\u002Fupload\u002Fc_scale,q_60,w_896\u002Fnjs5lvm67aolth8pvulf","youtube":"","externalUrl":"","created_at":1605527462083,"updated_at":1605532751732,"path":"\u002Fskriverier\u002Fpapegoye\u002F","date":"2020-11-16 11:51:02","source":"","sourceAsCanonical":null}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.d4f856d0.js" defer></script><script src="/assets/js/page--src--templates--blog-posts-vue.c22ddf38.js" defer></script><script data-vue-tag="ssr" type="text/javascript" data-body="true">WebFontConfig = {google: { families: [ 'Fira+Sans:400,700|Cardo' ] }};(function() {var wf = document.createElement('script');wf.src = 'https://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';wf.type = 'text/javascript';wf.async = 'true';var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(wf, s);})();</script>
  </body>
</html>
