<!doctype html> 
<html lang="no-nb"> 
<head>
  <meta charset="utf-8">
  <title>SJSD - blogg og notater om mine DIY</title>
  <meta name="author" content="Helge Johnsen">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  
  <link rel="icon" href="/favicon.png" />
  <link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png" />
  
  
  <link rel="stylesheet" href="/style.css" />
  <link href='//fonts.googleapis.com/css?family=Merriweather:400,700' rel='stylesheet' type='text/css'>

</head>
<body>

  <div class="wrap">
    <header class="mb">
      <h1 class="h2 m-0"><a href="/">SJSD - blogg og notater om mine DIY</a></h1>
      <p></p>
    </header>


<main>
<article class="post">
  <h1><a href="http://sjsd.github.io/post/kodeklubben-processing-pingpong/" title="Kodeklubben, Processing og Ping-Pong (forslag til løsning)">Kodeklubben, Processing og Ping-Pong (forslag til løsning)</a></h1>
  

<p>Dette er min gjennomgang av oppgaven <a href="http://kodeklubben.github.io/processing/pingpong/pingpong.html" title="Ping pong for Processing, Kodeklubben">Ping pong for Processing</a> laget av Kodeklubben. Min løsning er langt ifra den mest effektive koden. Tanken min er at man enkelt skal kunne lese seg frem til løsningen.</p>

<p>Jeg anbefaler at du går igjennom oppgavene <a href="http://kodeklubben.github.io/processing/pingpong/pingpong.html" title="Ping pong for Processing, Kodeklubben">Ping pong for Processing</a> før du ser på mitt forslag til løsning. Kanskje du finner en bedre løsning enn meg? Står du fast kan du ta en titt på hvordan jeg har valgt å løse utfordringene.</p>

<p><img src="pingpong.gif" alt="Animert bilde av PingPong" title="Processing Pingpong" /></p>

<h2 id="forklaring-av-koden:7e979b591601df796367c2e55b020eac">Forklaring av koden</h2>

<h3 id="del-1-ballen:7e979b591601df796367c2e55b020eac">Del 1: Ballen</h3>

<p>Vi setter opp noen variabler for ballen. For eksempel farten den skal ha i både X-aksen og Y-aksen og størrelsen.
<pre>// Ball
float ballX;
float ballY;
float ballXFart = 2;
float ballYFart = 2;
float ballRadius = 9;
float ballDiameter = ballRadius * 2;</pre></p>

<h4 id="ballx-og-bally:7e979b591601df796367c2e55b020eac">ballX og ballY</h4>

<p>Variablene <i>ballX</i> og <i>ballY</i> har ingen verdi. Vi bare forteller programmet at vi senere kommer til å bruke disse variablene og at de skal være av typen <i>float</i>.</p>

<h4 id="ballxfart-og-ballyfart:7e979b591601df796367c2e55b020eac">ballXFart og ballYFart</h4>

<p>Variabelen <i>ballXFart</i> bestemmer hastigheten i X-aksen. Dvs. hastigheten ballen har mot venstre eller høyre.</p>

<p>Variabelen <i>ballYFart</i> bestemmer hastigheten i Y-aksen. Dvs. hastigheten ballen har opp og ned.</p>

<h4 id="ballradius-og-balldiameter:7e979b591601df796367c2e55b020eac">ballRadius og ballDiameter</h4>

<p>Variabelen <i>ballRadius</i> og <i>ballDiameter</i> bestemmer størrelsen på ballen. Disse variablene bruker vi blant annet til å sjekke om kanten av ballen treffer en rekkert eller kanten av banen.</p>

<h3 id="del-2-rekkertene:7e979b591601df796367c2e55b020eac">Del 2: Rekkertene</h3>

<p>Vi setter opp variabler for to rekkerter. En som skal plasseres på venstre side og en på høyre side. De har begge samme størrelse. Likevel setter vi opp størrelsen for rekkert 1 og rekkert 2. Årsaken er at vi kommer til å endre størrelsen på rekkertene i spillet.
<pre>// Rekkertene
float rekkert1Hoyde = 66; // Rekkert 1 sin høyde ved start av spillet
float rekkert2Hoyde = 66; // Rekkert 2 sin høyde ved start av spillet
float rekkertBredde = 5; // Rekkertenes bredde
float rekkertFart = 4; // Hastighet på rekkertene</pre></p>

<h4 id="rekkert1hoyde-og-rekkert2hoyde:7e979b591601df796367c2e55b020eac">rekkert1Hoyde og rekkert2Hoyde</h4>

<p>Variablene <i>rekkert1Hoyde</i> og <i>rekkert2Hoyde</i> bestemmer høyden på de to rekkertene. Vi starter med lik høyde for begge to.</p>

<h4 id="rekkertbredde:7e979b591601df796367c2e55b020eac">rekkertBredde</h4>

<p>Variabelen <i>rekkertBredde</i> bestemmer bredden på rekkertene. Her skiller vi ikke mellom de to rekkertene. De får samme bredde og derfor setter vi opp kun en felles variabel.</p>

<h4 id="rekkertfart:7e979b591601df796367c2e55b020eac">rekkertFart</h4>

<p>Variabelen <i>rekkertFart</i> bestemmer hvor raskt rekkertene kan bevege seg. Vi lar begge rekkertene bevege seg like raskt og derfor deler de samme variabel.</p>

<pre>// Rekkert 1 sin plassering i X- og Y-aksen
float rekkert1X = 20;
float rekkert1Y = 100;</pre>

<pre>// Rekkert 2 sin plassering i X- og Y-aksen
float rekkert2X = 575;
float rekkert2Y = 100;</pre>

<h4 id="plassering-av-rekkerter:7e979b591601df796367c2e55b020eac">Plassering av rekkerter</h4>

<p>Variablene <i>rekkert1X</i> og <i>rekkert1Y</i> plasserer rekkert 1 (for spiller 1) helt til venstre på banen. Men variablene <i>rekkert2X</i> og <i>rekkert2Y</i> plasserer rekkert 2 (for spiller 2) helt til høyre på banen.</p>

<h3 id="del-3-poeng:7e979b591601df796367c2e55b020eac">Del 3: Poeng</h3>

<p>Vi setter poengene til 0 for begge spillerne
<pre>// Poeng
int spiller1 = 0;
int spiller2 = 0;</pre></p>

<h4 id="spiller1-og-spiller2:7e979b591601df796367c2e55b020eac">spiller1 og spiller2</h4>

<p>Variablene <i>spiller1</i> og <i>spiller2</i> er poengene de to spillerne har når spillet starter.</p>

<h3 id="del-4-det-olbigatoriske-oppsettet:7e979b591601df796367c2e55b020eac">Del 4: Det olbigatoriske oppsettet</h3>

<p>Vi setter størrelsen til 600x300 i henhold til oppgaven. Nå vi vet størrelsen så kan vi også sette ballens startposisjon.</p>

<pre>void setup() {
  size(600,300);

  // Starposisjon for ball
  ballX = width / 2;
  ballY = height / 2;
}</pre>

<h3 id="del-5-utregning-regler-og-opptegning:7e979b591601df796367c2e55b020eac">Del 5: Utregning, regler og opptegning</h3>

<p><strong>VIKTIG!</strong> All kode etter dette punktet legges til innen for draw(). Så vi begynner med å lage den.
<pre>void draw() {
    // All kode legger vi inn her
}</pre></p>

<h3 id="del-6-ballens-hastighet-og-fart:7e979b591601df796367c2e55b020eac">Del 6: Ballens hastighet og fart</h3>

<p>Vi angir ballens posisjon + fart i både X-aksen og Y-aksen</p>

<pre>// Posisjon for ball
ballX = ballX + ballXFart;
ballY = ballY + ballYFart;</pre>

<h3 id="del-7-hva-skjer-med-ballen:7e979b591601df796367c2e55b020eac">Del 7: Hva skjer med ballen</h3>

<p>Hva skjer med ballen når den kommer utenfor kanten på venstre eller høyre side. Vi sjekker ballens posisjon mot kanten av &ldquo;bordtennisbordet&rdquo;.  Kommer den utenfor kanten så begynner den på nytt midt på bordet.</p>

<pre>// Ny posisjon for ball hvis den kommer utenfor venstre side
if (ballX < ballRadius) {
    ballX = width / 2;
    ballY = height / 2;
}</pre>

<pre>// Ny posisjon for ball hvis den kommer utenfor høyre side 
if (ballX > width - ballRadius) {
    ballX = width / 2;
    ballY = height / 2;
}</pre>

<p>Hvis ballen treffet toppen eller bunnen så endrer vi retning ved sette på en minus (-) foran farten. Da snur ballen.</p>

<pre>// Y-retning - sprett i toppen
if (ballY < ballRadius) {
    ballYFart = -ballYFart;
}</pre>

<pre>// Y-retning - sprett i bunnen
if (ballY > height - ballRadius) {
    ballYFart = -ballYFart;
}</pre>

<h3 id="del-8-når-ballen-treffer-rekkerten:7e979b591601df796367c2e55b020eac">Del 8: Når ballen treffer rekkerten</h3>

<p>Siden vi har lagt opp til at vi skal ha noen rekkerter så legger vi til noen &ldquo;regler&rdquo; via <code>if</code>. Først legger vi til en regel for rekkerten til venstre (spiller 1).</p>

<pre>// Hvis ball treffer rekkert på venstre side
if (ballX-ballRadius < rekkert1X + rekkertBredde && ballX + ballRadius > rekkert1X) {
    if (ballY < rekkert1Y + rekkert1Hoyde && ballY > rekkert1Y) {
        ballX = ballX + rekkertBredde; // Ny posisjon for ball i X-aksen
        ballXFart = -ballXFart; // Ny retning for ball i X-aksen
        rekkert1Hoyde = rekkert1Hoyde - 2; // Gjør rekkert litt mindre
        spiller1 = spiller1 + 1; // Legg på poeng for spiller 1        
    }
}</pre>

<p>Så legger vi til en &ldquo;regel&rdquo; for hva som skal hende med ballen når den treffer den andre rekkerten (for spiller 2).</p>

<pre>// Hvis ball treffer rekkert på høyre side
if (ballX-ballRadius < rekkert2X + rekkertBredde && ballX + ballRadius > rekkert2X) {
    if (ballY < rekkert2Y + rekkert2Hoyde && ballY > rekkert2Y) {
        ballX = ballX - rekkertBredde; // Ny posisjon for ball i Y-aksen
        ballXFart = -ballXFart; // Ny retning for ball i Y-aksen
        rekkert2Hoyde = rekkert2Hoyde - 2; // Gjør rekkert litt mindre
        spiller2 = spiller2 + 1; // Legg på poeng for spiller 2
    }
}</pre>

<p>Hvis vi ser på de to &ldquo;reglene&rdquo; for begge rekkertene så er de nesten like. Når ballen treffer rekkerten så endres retningen for ballen. I tillegg gjør vi noe lurt for å gjøre spillet litt vanskeligere. Høyden på rekkerten blir litt lavere for hver gang man &ldquo;slår&rdquo; ballen. Så får man et poeng.</p>

<h3 id="spilltaster:7e979b591601df796367c2e55b020eac">Spilltaster</h3>

<p>For å kunne spille så må man kunne kontrollere rekkertene. Dette gjøres ved å sjekke om det er en tast på tastaturet som blir trykket ned. Så sjekker vi hvilken tast det er og om det stemmer overens med de vi ønsker å bruke for å kontrollere en av rekkertene.</p>

<pre>if (keyPressed) {
    // Kontroll av rekkert 2 (høyre side)
    if (keyCode == UP) {
        rekkert2Y = rekkert2Y - rekkertFart;
    }

    if (keyCode == DOWN) {
        rekkert2Y = rekkert2Y + rekkertFart;
    }

    // Kontroll av rekkert 1 (venstre side)
    if (key == 'w') {
        rekkert1Y = rekkert1Y - rekkertFart;
    }

    if (key == 's') {
        rekkert1Y = rekkert1Y + rekkertFart;
    }
}</pre>

<p>Som du ser i koden så bruker vi piltast opp og ned. De kontrollerer rekkerten til høyre (spiller 1). Mens <i>w</i> og <i>s</i> er for rekkerten til venstre (spiller 1).</p>

<h3 id="del-9-tegn-opp-figurer:7e979b591601df796367c2e55b020eac">Del 9: Tegn opp figurer</h3>

<p>Nå skal vi oppdatere skjermen med alle de tall og variabler vi har angitt eller endret på.</p>

<pre>
background(0);
ellipse(ballX, ballY, ballDiameter, ballDiameter); // Tegn ball
rect(rekkert1X, rekkert1Y, rekkertBredde, rekkert1Hoyde); // Tegn rekkert 1
rect(rekkert2X, rekkert2Y, rekkertBredde, rekkert2Hoyde); // Tegn rekkert 2
text(spiller1+" poeng",10,10); // Poenh for spiller 1
text(spiller2+" poeng",550,10); // Poeng for spiller 2
</pre>

<h3 id="del-10-komplett-kode:7e979b591601df796367c2e55b020eac">Del 10: Komplett kode</h3>

<p>Slik ser den ferdige koden ut.</p>

<pre>
// Ball
float ballX;
float ballY;
float ballXFart = 2;
float ballYFart = 2;
float ballRadius = 9;
float ballDiameter = ballRadius * 2;

// Rekkertene
float rekkert1Hoyde = 66; // Rekkert 1 sin høyde ved start av spillet
float rekkert2Hoyde = 66; // Rekkert 2 sin høyde ved start av spillet
float rekkertBredde = 5; // Rekkertenes bredde
float rekkertFart = 4; // Hastighet på rekkertene

// Rekkert 1 sin plassering i X- og Y-aksen
float rekkert1X = 20;
float rekkert1Y = 100;

// Rekkert 2 sin plassering i X- og Y-aksen
float rekkert2X = 575;
float rekkert2Y = 100;

// Poeng
int spiller1 = 0;
int spiller2 = 0;


void setup() {
    size(600,300);
    
    smooth(2);
    // Starposisjon for ball
    ballX = width / 2;
    ballY = height / 2;
}

void draw() {
    // Posisjon for ball
    ballX = ballX + ballXFart;
    ballY = ballY + ballYFart;
    
    // Ny posisjon for ball hvis den kommer utenfor venstre side
    if (ballX < ballRadius) {
        ballX = width / 2;
        ballY = height / 2;
    }

    // Ny posisjon for ball hvis den kommer utenfor høyre side 
    if (ballX > width - ballRadius) {
        ballX = width / 2;
        ballY = height / 2;
    }
    
    // Y-retning - sprett i toppen
    if (ballY < ballRadius) {
        ballYFart = -ballYFart;
    }
    
    // Y-retning - sprett i bunnen
    if (ballY > height - ballRadius) {
        ballYFart = -ballYFart;
    }
    
    // Hvis ball treffer rekkert på venstre side
    if (ballX-ballRadius < rekkert1X + rekkertBredde && ballX + ballRadius > rekkert1X) {
            if (ballY < rekkert1Y + rekkert1Hoyde && ballY > rekkert1Y) {
                ballX = ballX + rekkertBredde; // Ny posisjon for ball i X-aksen
                ballXFart = -ballXFart; // Ny retning for ball i X-aksen
                rekkert1Hoyde = rekkert1Hoyde - 2; // Gjør rekkert litt mindre
                spiller1 = spiller1 + 1; // Legg på poeng for spiller 1        
            }
    }
    
    // Hvis ball treffer rekkert på høyre side
    if (ballX-ballRadius < rekkert2X + rekkertBredde && ballX + ballRadius > rekkert2X) {
            if (ballY < rekkert2Y + rekkert2Hoyde && ballY > rekkert2Y) {
                ballX = ballX - rekkertBredde; // Ny posisjon for ball i Y-aksen
                ballXFart = -ballXFart; // Ny retning for ball i Y-aksen
                rekkert2Hoyde = rekkert2Hoyde - 2; // Gjør rekkert litt mindre
                spiller2 = spiller2 + 1; // Legg på poeng for spiller 2
            }
    }
    
    if (keyPressed) {
        // Kontroll av rekkert 2 (høyre side)
        if (keyCode == UP) {
            rekkert2Y = rekkert2Y - rekkertFart;
        }
        
        if (keyCode == DOWN) {
            rekkert2Y = rekkert2Y + rekkertFart;
        }

        // Kontroll av rekkert 1 (venstre side)
        if (key == 'w') {
            rekkert1Y = rekkert1Y - rekkertFart;
        }
        
        if (key == 's') {
            rekkert1Y = rekkert1Y + rekkertFart;
        }
    }
    

    background(0);
    ellipse(ballX, ballY, ballDiameter, ballDiameter); // Tegn ball
    rect(rekkert1X, rekkert1Y, rekkertBredde, rekkert1Hoyde); // Tegn rekkert 1
    rect(rekkert2X, rekkert2Y, rekkertBredde, rekkert2Hoyde); // Tegn rekkert 2
    text(spiller1+" poeng",10,10); // Poenh for spiller 1
    text(spiller2+" poeng",550,10); // Poeng for spiller 2
}
</pre>

<p>Klarer du å lage en autoplay som spiller spillet for deg?
Klarer du å legge på egne farger på de enkelte delene?
Klarer du å få flere poeng en din motstander?</p>

<p><strong>Lykke til!</strong></p>

  <p class="small gray"><time datetime="2016-04-120">Apr 04, 2016</time></p>
</article>
</main>
</div>
</body>
</html>
